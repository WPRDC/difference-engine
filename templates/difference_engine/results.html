{% load static %}<!doctype html>
<html>
    <head>
        <title>The Difference Engine</title>
        <link rel="stylesheet" type="text/css" href="{% static 'difference_engine/css/normalize.css' %}">
        <link rel="stylesheet" type="text/css" href="{% static 'difference_engine/css/skeleton.css' %}">
        <link rel="stylesheet" type="text/css" href="{% static 'difference_engine/css/engine.css' %}">
        <link rel="stylesheet" type="text/css" href="{% static 'difference_engine/css/diff.css' %}">
    </head>
    <body>
    <div class="container">
        <div class="row">
            <div class="five columns">
                <h2 style="font-variant: small-caps;font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif !important">The Difference Engine</h2>
            </div>
            <div class="seven columns">
                <span style="font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif"><i>Find the differences between two resources on a CKAN-powered data portal.</i></span>
            </div>
        </div>
        <hr>
        <div class="row">
            <div class="six columns">
                <h5>File 1</h5>
                {% if error  %}
                    {{ error }}<br>
                    Here's the list of resource candidates for file 1: {{ candidate_r_ids1 }}
                {% else %}
                Resource name: <b>{{ data_dict_1.resource_name }}</b><br>
                Source data: <a href="{{ data_dict_1.resource_url }}">{{ data_dict_1.package_name }}:{{ data_dict_1.resource_name }}</a><br>
                Rows {% autoescape off %}&times;{% endautoescape %} columns: <b>{{ rows1 }}</b> {% autoescape off %}&times;{% endautoescape %} <b>{{ columns1 }}</b><br>
                {% endif %}
            </div>
            <div class="six columns">
                <h5>File 2</h5>
                {% if error %}
                    {{ error }}<br>
                    Here's the list of resource candidates for file 2: {{ candidate_r_ids2 }}
                {% else %}
                Resource name: <b>{{ data_dict_2.resource_name }}</b><br>
                Source data: <a href="{{ data_dict_2.resource_url }}">{{ data_dict_2.package_name }}:{{ data_dict_2.resource_name }}</a><br>
                Rows {% autoescape off %}&times;{% endautoescape %} columns: <b>{{ rows2 }}</b> {% autoescape off %}&times;{% endautoescape %} <b>{{ columns2 }}</b><br>
                {% endif %}
            </div>
        </div>
        {% if not error %}
        <hr>
        <div class="row">
            <div class="twelve columns">
                <h5>Comparison of field names</h5>
                {% if identical_fn %}
                    The field names of the two files are identical.
                {% else %}
                {% autoescape off %}
                    {{ field_table }}
                {% endautoescape %}<P>
                {% endif %}
                <br>Select fields to ignore in the comparison:
            <form method="post">
                {% csrf_token %}
                {{ field_picker }}
                <input type="submit" value="Submit">
            </form>
            </div>
        </div>
        <hr>
        <div class="row">
            <div class="twelve columns">
                <h3>Comparison of resources</h3>
                {% autoescape off %}
                    {{ flat_table }}
                {% endautoescape %}<P>
            </div>
        </div>
        <hr>
        <div class="row">
            <div class="twelve columns">
                <h3>Comparisons of resources by column*</h3>
                * This approach is a little buggier but sort of more readable.<br>

                {% for field,table in diff_table.items %}
                    <b>{{ field }}</b>
                    {% autoescape off %}
                        {{ table }}
                    {% endautoescape %}<P>
                {% endfor %}
            </div>
        </div>
        {% endif %}
    </div>
    </body>
</html>
